<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pipedrive CRM Integration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        iframe {
            width: 100%;
            height: 500px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Pipedrive CRM Integration</h1>
        
        <!-- Iframe for form -->
        <iframe id="crmForm" src="about:blank"></iframe>
        
        <button onclick="saveToPipedrive()">Save to Pipedrive</button>
        
        <div id="status"></div>
    </div>

    <script>
        // Initialize iframe with your form
        document.getElementById('crmForm').src = 'your-form-url.html';
        
        // Function to get data from iframe (assuming you control the iframe content)
        function getFormData() {
            const iframe = document.getElementById('crmForm');
            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            
            // Example: Get form data - adjust selectors based on your form
            const formData = {
                title: iframeDoc.querySelector('#dealTitle')?.value || '',
                value: iframeDoc.querySelector('#dealValue')?.value || '',
                currency: iframeDoc.querySelector('#currency')?.value || 'USD',
                person_name: iframeDoc.querySelector('#contactName')?.value || '',
                person_email: iframeDoc.querySelector('#contactEmail')?.value || '',
                org_name: iframeDoc.querySelector('#companyName')?.value || '',
                phone: iframeDoc.querySelector('#phone')?.value || '',
                custom_fields: {
                    // Add your custom fields here
                    custom_field1: iframeDoc.querySelector('#customField1')?.value || ''
                }
            };
            
            return formData;
        }
    </script>
</body>
</html>
